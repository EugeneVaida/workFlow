{"version":3,"sources":["webpack:///./src/app/project/project.module.ts","webpack:///./src/app/project/project.page.html","webpack:///./src/app/project/project.page.scss","webpack:///./src/app/project/project.page.ts"],"names":[],"mappings":"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","file":"project-project-module.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { ProjectPage } from './project.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: ProjectPage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    RouterModule.forChild(routes)\n  ],\n  declarations: [ProjectPage]\n})\nexport class ProjectPageModule {}\n","module.exports = \"<ion-header>\\r\\n  <ion-toolbar>\\r\\n    <ion-buttons slot=\\\"start\\\">\\r\\n      <ion-back-button>\\r\\n      </ion-back-button>\\r\\n    </ion-buttons>\\r\\n    <ion-title>Проект - {{ project.name }}</ion-title>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n<ion-content padding>\\r\\n    <ion-fab vertical=\\\"top\\\" horizontal=\\\"end\\\" edge slot=\\\"fixed\\\" (click)=\\\"invitation(project.id)\\\">\\r\\n      <ion-fab-button>\\r\\n        <ion-icon name=\\\"link\\\"></ion-icon>\\r\\n      </ion-fab-button>\\r\\n    </ion-fab>\\r\\n  <ion-row justify-content-center>\\r\\n    <ion-col align-self-center size-md=\\\"9\\\" size-lg=\\\"9\\\" size-xs=\\\"12\\\">\\r\\n      <div>\\r\\n        <ion-card>\\r\\n          <ion-card-header>\\r\\n            <ion-card-title>\\r\\n              <h1>\\r\\n                {{ project.name }}\\r\\n              </h1>\\r\\n            </ion-card-title>\\r\\n            <ion-card-subtitle>\\r\\n              <ion-button size=\\\"small\\\" color=\\\"primary\\\" (click)=\\\"showForEdit(project)\\\">\\r\\n                <ion-ripple-effect></ion-ripple-effect>\\r\\n                <ion-icon name=\\\"create\\\"></ion-icon>\\r\\n                Редактировать\\r\\n              </ion-button>\\r\\n              <ion-button size=\\\"small\\\" color=\\\"medium\\\" (click)=\\\"onDelete(project.id)\\\">\\r\\n                <ion-ripple-effect></ion-ripple-effect>\\r\\n                <ion-icon name=\\\"trash\\\"></ion-icon>\\r\\n                Удалить\\r\\n              </ion-button>\\r\\n              <br>\\r\\n              <br>\\r\\n              {{ project.startDate | date: \\\"dd/MM/yyyy\\\"}} - {{ project.endDate | date: \\\"dd/MM/yyyy\\\"}}\\r\\n              <br>\\r\\n              <br>         \\r\\n              <div *ngFor=\\\"let tag of project.tags\\\">\\r\\n                <ion-chip color=\\\"tertiary\\\" [routerLink]=\\\"'/tag-projects/' + tag.id\\\">\\r\\n                  <ion-label color=\\\"tertiary\\\">{{ tag.name }}</ion-label>\\r\\n                </ion-chip>\\r\\n              </div>\\r\\n            </ion-card-subtitle>\\r\\n          </ion-card-header>\\r\\n          <ion-card-content style=\\\"font-size: 18px;\\\">\\r\\n            {{ project.description }}\\r\\n            <br>\\r\\n            <br>\\r\\n            <br>\\r\\n\\r\\n            <ion-list>\\r\\n              <ion-list-header>\\r\\n                <ion-label>Спринты</ion-label>\\r\\n              </ion-list-header>\\r\\n              <ion-item-sliding *ngFor=\\\"let sprint of project.sprints\\\">\\r\\n                <ion-item-options side=\\\"start\\\">\\r\\n                  <ion-item-option color=\\\"danger\\\" (click)=\\\"deleteSprint(sprint.id, project)\\\">Delete</ion-item-option>\\r\\n                </ion-item-options>\\r\\n                <ion-item>\\r\\n                  <ion-label>{{ sprint.name }}</ion-label>\\r\\n                  <ion-icon *ngIf=\\\"sprint.isDone\\\" color=\\\"tertiary\\\" name=\\\"checkmark-circle\\\"></ion-icon>\\r\\n                </ion-item>\\r\\n                <ion-item-options side=\\\"end\\\">\\r\\n                  <ion-item-option color=\\\"warning\\\" (click)=\\\"markSprintAsDone(sprint.id, project.id)\\\">Done!\\r\\n                  </ion-item-option>\\r\\n                </ion-item-options>\\r\\n              </ion-item-sliding>\\r\\n            </ion-list>\\r\\n\\r\\n          </ion-card-content>\\r\\n        </ion-card>\\r\\n      </div>\\r\\n    </ion-col>\\r\\n  </ion-row>\\r\\n</ion-content>\\r\\n\"","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL3Byb2plY3QvcHJvamVjdC5wYWdlLnNjc3MifQ== */\"","import { Component, OnInit } from '@angular/core';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { ProjectService } from '../shared/project.service';\r\nimport { SprintService } from '../shared/sprint.service';\r\nimport { Project } from '../shared/project.model';\r\nimport { ToastController } from '@ionic/angular';\r\nimport { AlertController } from '@ionic/angular';\r\n\r\n@Component({\r\n  selector: 'app-project',\r\n  templateUrl: './project.page.html',\r\n  styleUrls: ['./project.page.scss'],\r\n})\r\nexport class ProjectPage implements OnInit {\r\n  private id: string;\r\n  public project: Project;\r\n  constructor(\r\n    private route: ActivatedRoute,\r\n    public projectService: ProjectService,\r\n    public toastController: ToastController,\r\n    public alertController: AlertController,\r\n    private router : Router,\r\n    public sprintService : SprintService\r\n  ) { }\r\n\r\n  ngOnInit(){\r\n    \r\n  }\r\n\r\n  ionViewWillEnter() {\r\n    this.id = this.route.snapshot.paramMap.get('id');\r\n    this.projectService.returnProjectById(this.id).subscribe(data =>{\r\n      this.project = data;\r\n      console.log(this.project);\r\n    });    \r\n  }\r\n\r\n  async presentToast(text, theme) {\r\n    const toast = await this.toastController.create({\r\n      message: text,\r\n      showCloseButton: true,\r\n      duration: 2000,\r\n      position: 'top',\r\n      closeButtonText: 'Done',\r\n      color: theme\r\n    });\r\n    toast.present();\r\n  }\r\n\r\n  async onDelete(id: number) {\r\n    const alert = await this.alertController.create({\r\n      header: 'Удаление',\r\n      message: 'Вы действительно хотите удалить проект?',\r\n      buttons: [\r\n        {\r\n          text: 'Отменить',\r\n          role: 'cancel',\r\n          cssClass: 'secondary'          \r\n        }, {\r\n          text: 'Удалить',\r\n          handler: () => {\r\n            this.projectService.deleteProject(id)\r\n            .subscribe(x => {\r\n              this.projectService.getAllProjects();\r\n              this.router.navigate(['/projects']);\r\n              this.presentToast('Project deleted!', 'danger');\r\n            })\r\n          }\r\n        }\r\n      ]\r\n    });\r\n    await alert.present();\r\n  }\r\n\r\n  showForEdit(prj: Project) {\r\n    this.projectService.selectedProject = Object.assign({}, prj);\r\n    this.router.navigate(['/projectform']);\r\n  }\r\n\r\n  invitation(id: number){\r\n    console.log(id);\r\n    this.projectService.projectInvitation(id);\r\n    this.router.navigate(['/invite-link']);\r\n  }\r\n\r\n  deleteSprint(sprintId : number, project : Project){\r\n    const index = project.sprints.findIndex(x => x.id == sprintId);\r\n    if (index > -1) {\r\n      project.sprints.splice(index, 1);\r\n    }\r\n    console.log(project);\r\n    this.projectService.putProject(project.id, project).subscribe(data =>{\r\n      this.presentToast('Sprint deleted!', 'danger');\r\n    });\r\n  }\r\n\r\n  markSprintAsDone(id: number){\r\n    this.sprintService.markSprintAsDone(id).subscribe(data => {\r\n      this.id = this.route.snapshot.paramMap.get('id');\r\n      this.projectService.returnProjectById(this.id).subscribe(data =>{\r\n        this.project = data;\r\n        console.log(this.project);\r\n      });\r\n      this.presentToast('Sprint done!', 'success');\r\n    });\r\n  }\r\n\r\n}\r\n"],"sourceRoot":""}